<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>THE BLACK í…œí”Œë¦¿</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #000;
      font-family: 'Segoe UI', 'Pretendard', sans-serif;
      color: #f2f2f2;
    }
    .render-target {
      max-width: 720px;
      margin: 40px auto;
      background-color: #111;
      padding: 30px 36px;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.85);
      box-sizing: border-box;
    }
    .section-title {
      text-align: center;
      font-size: 42px;
      font-weight: 700;
      margin: 0;
      color: #ffd700;
    }
    .subtitle {
      text-align: center;
      font-size: 18px;
      color: #aaa;
      margin-top: 8px;
    }
    .info-box {
      text-align: center;
      font-size: 17px;
      color: #ccc;
      line-height: 1.6;
      margin-top: 28px;
      margin-bottom: 20px;
    }
    .info-box p { margin: 6px 0; }
    .cta-button {
      display: inline-block;
      background-color: #00ffd5;
      color: #000;
      padding: 8px 18px;
      border-radius: 20px;
      font-weight: bold;
      text-decoration: none;
      transition: background-color 0.3s;
      font-size: 16px;
    }
    .divider {
      border: none;
      border-top: 1px solid #333;
      margin: 24px 0;
    }
    .price-title {
      text-align: center;
      font-size: 22px;
      color: #00ffae;
      font-weight: 600;
      margin: 0;
    }
    .description {
      font-size: 18px;
      color: #eee;
      line-height: 1.7;
      white-space: pre-wrap;
      word-break: keep-all;
      margin-top: 24px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="render-target">
    <div style="text-align: center; margin-bottom: 12px;">
      <h1 class="section-title">
        <a href="https://open.kakao.com/o/gUVp9cwh" target="_blank" style="color: inherit; text-decoration: none;">
          âš” THE BLACK SHOP âš”
        </a>
      </h1>
      <p class="subtitle">ë””ì•„ë¸”ë¡œ4 ì‹œì¦Œ9 ë²„ìŠ¤ Â· ëŒ€ë¦¬ Â· ì•„ì´í…œ ì „ë¬¸ ê±°ë˜ì†Œ</p>
    </div>
    <div class="info-box">
      <p>ğŸ’ <strong>ëª¨ë“  ì¥ë¹„, ì•„ì´í…œ, ì¬ë£Œ ì™„ë¹„</strong></p>
      <p>ğŸ›¡ <strong>ë²„ìŠ¤, ëŒ€ë¦¬, ì„¸íŒ… í’€ ì§€ì›</strong></p>
      <p>ğŸ§™ <strong>ê²½í—˜ ë§ì€ ì „ë¬¸ ê¸°ì‚¬ ìƒì‹œ ëŒ€ê¸°</strong></p>
      <p>ğŸ”¥ <strong>í•©ë¦¬ì ì¸ ì‹¤ì‹œê°„ ìµœì €ê°€ ë³´ì¥</strong></p>
    </div>
    <div style="text-align: center;">
      <a class="cta-button" href="https://open.kakao.com/o/gUVp9cwh" target="_blank">
        ğŸ’¬ ì˜¤í”ˆì±„íŒ… ë¬¸ì˜í•˜ê¸°
      </a>
    </div>
    <hr class="divider">
    <div>
      <h2 class="price-title">ğŸ’° ì‹¤ì‹œê°„ ê°€ê²©í‘œ</h2>
    </div>
    <div class="description" id="mainText"></div>
  </div>

  <script>
    // URL íŒŒë¼ë¯¸í„°ì—ì„œ mainTextë¥¼ ê°€ì ¸ì™€ì„œ ë””ìì¸ì— ë°˜ì˜
    const params = new URLSearchParams(window.location.search);
    const text = params.get("mainText") || "";
    document.getElementById("mainText").innerText = text;
  </script>
  <!-- html-to-image UMD ë°©ì‹ìœ¼ë¡œ ì‚½ì… -->
  <script src="https://unpkg.com/html-to-image@1.11.11/dist/html-to-image.min.js"></script>
  <script>
    window.addEventListener('DOMContentLoaded', function() {
      setTimeout(function() {
        const node = document.querySelector('.render-target');
        if (!node) return;

        window.htmlToImage.toPng(node)
          .then(function(dataUrl) {
            // TODO: ì´ ê³³ì—ì„œ Supabase ì—…ë¡œë“œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜,
            // ë¶€ëª¨ ì°½(postMessage) ë“±ìœ¼ë¡œ ê²°ê³¼ ì „ë‹¬ ê°€ëŠ¥
            // ì˜ˆì‹œ: window.parent.postMessage({type:'image', url:dataUrl}, '*');
            // ë˜ëŠ” uploadToSupabase(dataUrl)
            // ë˜ëŠ” console.log(dataUrl);
            // document.body.innerHTML += `<img src="${dataUrl}" style="width:100%;border:2px solid red;">`; // TEST ONLY
          })
          .catch(function(error) {
            console.error('ì´ë¯¸ì§€ ìƒì„± ì—ëŸ¬: ', error);
          });
      }, 2000); // 2ì´ˆ í›„ ì‹¤í–‰ (í…ìŠ¤íŠ¸ ë Œë” í›„ ë°”ë¡œ ìº¡ì³)
    });
  </script>
</body>
</html>
